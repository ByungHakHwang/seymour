\begin{definition}[$1$-sum of matrices]
  \label{Matrix_1sumComposition}
  % \uses{}
  \lean{Matrix_1sumComposition}
  \leanok
  Let $B$ be a matrix that can be represented as
  \begin{tabular}{cccc}
                                 & $Y_{1}$                      & $Y_{2}$                      \\ \cline{2-3}
    \multicolumn{1}{c|}{$X_{1}$} & \multicolumn{1}{c|}{$B_{1}$} & \multicolumn{1}{c|}{    $0$} \\ \cline{2-3}
    \multicolumn{1}{c|}{$X_{2}$} & \multicolumn{1}{c|}{    $0$} & \multicolumn{1}{c|}{$B_{2}$} \\ \cline{2-3}
  \end{tabular}
  Then we say that $B_{1}$ and $B_{2}$ are the two \emph{components} of a \emph{$1$-sum decomposition} of $B$.

  Conversely, a \emph{$1$-sum composition} with \emph{components} $B_{1}$ and $B_{2}$ is the matrix $B$ above.

  The expression $B = B_{1} \oplus_{1} B_{2}$ means either process.
\end{definition}

\begin{definition}[matroid $1$-sum]
  \label{BinaryMatroid.Is1sumOf}
  \uses{BinaryMatroid,Matrix_1sumComposition}
  \lean{BinaryMatroid.Is1sumOf}
  \leanok
  Let $M$ be a binary matroid with a representation matrix $B$.
  Suppose that $B$ can be partitioned as in Definition~\ref{Matrix_1sumComposition} with non-zero blocks $B_{1}$ and $B_{2}$.
  Then the binary matroids $M_{1}$ and $M_{2}$ represented by $B_{1}$ and $B_{2}$, respectively, are the two \emph{components} of a \emph{$1$-sum decomposition} of $M$.

  Conversely, a \emph{$1$-sum composition} with \emph{components} $M_{1}$ and $M_{2}$ is the matroid $M$ defined by the corresponding representation matrix $B$.

  The expression $M = M_{1} \oplus_{1} M_{2}$ means either process.
\end{definition}

% todo: $1$-sum of matroids is the same as direct sum

\begin{lemma}[$1$-sum is commutative]
  \label{BinaryMatroid_1sum_comm}
  \uses{BinaryMatroid.Is1sumOf}
  \lean{BinaryMatroid_1sum_comm}
  \leanok
  \todo[inline]{add}
\end{lemma}

% % todo: nice to have, but not vital; can be done when working on formalizing k-separations for hard direction
% \begin{lemma}[$1$-separations and $1$-sums]
%   \label{lem:code_1_sep_yields_1_sum}
%   \uses{BinaryMatroid.Is1sumOf,def:code_k_sep}
%   Let $M$ be a binary matroid that is $1$-separable.
%   Then $M$ can be decomposed as a $1$-sum with components given by the $1$-separation.
% \end{lemma}

% \begin{proof}[Proof sketch]
%   \uses{BinaryMatroid.Is1sumOf,def:code_k_sep}
%   Check by definition.
% \end{proof}

% todo: lemma 8.2.2.a: graphic with 1-sum decomposition -> graph representations connected via node identification
% todo: lemma 8.2.2.b: 1-sum composition of graphic (planar) is graphic (planar)

\begin{theorem}[$1$-sum of regular matroids is regular]
  \label{BinaryMatroid.Is1sumOf.isRegular}
  \lean{BinaryMatroid.Is1sumOf.isRegular}
  \leanok
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular}
  Let $M_{1}$ and $M_{2}$ be regular matroids. Then $M = M_{1} \oplus_{1} M_{2}$ is a regular matroid.

  Conversely, if a regular matroid $M$ can be decomposed as a $1$-sum $M = M_{1} \oplus_{1} M_{2}$, then $M_{1}$ and $M_{2}$ are both regular.
\end{theorem}

\begin{proof}[Proof sketch]
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular,lem:code_diagonal_with_tu_blocks}
  %\leanok
  \todo[inline]{extract into lemmas about TU matrices}
  Let $B$, $B_{1}$, and $B_{2}$ be the representation matrices of $M$, $M_{1}$, and $M_{2}$, respectively.
  \begin{itemize}
    \item Converse direction. Let $B'$ be a TU signing of $B$. Let $B_{1}'$ and $B_{2}'$ be signings of $B_{1}$ and $B_{2}$, respectively, obtained from $B$. By Lemma~\ref{lem:code_submatrix_of_tu}, $B_{1}'$ and $B_{2}'$ are both TU, so $M_{1}$ and $M_{2}$ are both regular.
    \item Forward direction. Let $B_{1}'$ and $B_{2}'$ be TU signings of $B_{1}$ and $B_{2}$, respectively. Let $B'$ be the corresponding signing of $B$. By Lemma~\ref{lem:code_diagonal_with_tu_blocks}, $B'$ is TU, so $M$ is regular.
  \end{itemize}
\end{proof}

\begin{lemma}[left summand of regular $1$-sum is regular]
  \label{BinaryMatroid.Is1sumOf.isRegular_left}
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular}
  \lean{BinaryMatroid.Is1sumOf.isRegular_left}
  \leanok
  \todo[inline]{add}
\end{lemma}

\begin{proof}
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular, lem:code_submatrix_of_tu}
\end{proof}

\begin{lemma}[right summand of regular $1$-sum is regular]
  \label{BinaryMatroid.Is1sumOf.isRegular_right}
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular}
  \lean{BinaryMatroid.Is1sumOf.isRegular_right}
  \leanok
  \todo[inline]{add}
\end{lemma}

\begin{proof}
  \uses{BinaryMatroid.Is1sumOf,BinaryMatroid.IsRegular, lem:code_submatrix_of_tu}
\end{proof}
